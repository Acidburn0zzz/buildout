[buildout]
extends = base.cfg
parts +=
   pyzope
   test
   dependencies

extensions = buildout.dumppickedversions

[instance]
eggs +=
    Products.PDBDebugMode
    Products.PTProfiler

[pyflakes]
recipe = zc.recipe.egg
index = https://dist.infrae.com/thirdparty/
find-links = https://dist.infrae.com/thirdparty/
scripts =
   pyflakes
eggs =
   pyflakes
   setuptools
entry-points = pyflakes=pkg_resources:run_script
arguments = 'pyflakes', 'pyflakes'

[pyzope]
recipe = zc.recipe.egg
eggs =
   ${instance:eggs}
interpreter = pyzope
scripts =
   pyzope
   eggdeps

[silva-all]
recipe = collective.recipe.omelette
eggs = ${instance:eggs}

[test]
recipe = zc.recipe.testrunner
eggs =
  Products.Silva
  Products.SilvaDocument
  Products.SilvaExternalSources
  Products.SilvaFind
  Products.SilvaForum
  Products.SilvaLayout
  Products.SilvaLayout
  Products.SilvaMetadata
  Products.SilvaNews
  silva.app.redirectlink
  silva.core.conf
  silva.core.layout
  silva.core.services
  silva.core.upgrade
  silva.core.views
  silva.export.opendocument
  silva.resourceinclude
  silva.searchandreplace

defaults = ['-m', 'Products.Silva', '-m', 'silva', '--tests-pattern', '^f?tests$', '-v']

[dependencies]
recipe = z3c.recipe.depgraph
eggs = ${instance:eggs}

