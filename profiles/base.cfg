[buildout]
extends = versions.cfg
parts =
    zodbupdate
    instance
    wsgi
    mod_wsgi_app
    deploy.ini

find-links +=
    https://dist.infrae.com/thirdparty/
    http://infrae.com/download/simple/
    http://download.zope.org/ppix/
    http://download.zope.org/distribution/

versions = versions
unzip = true

[mod_wsgi_app]
recipe = collective.recipe.modwsgi
eggs = ${wsgi:eggs}
config-file = ${deploy.ini:output}

[wsgi]
recipe = zc.recipe.egg
eggs = ${instance:eggs}
     silva.wsgi
     Paste
     PasteScript
     PasteDeploy

[deploy.ini]
recipe = collective.recipe.template
input = ${buildout:directory}/profiles/deploy.ini
output = ${buildout:directory}/deploy.ini

[instance]
recipe = plone.recipe.zope2instance
blob-storage = ${buildout:directory}/var/filestorage/blobs
user = admin:admin
debug-mode = off
http-address = 8080
eggs =
  Zope2
  Products.Silva
  Products.SilvaForum
  Products.SilvaNews
  silva.app.oaiprovider
  silva.app.redirectlink
  silva.export.opendocument
  silva.searchandreplace
  silva.security.addables
  silvatheme.multiflex
zcml =
  silva.app.oaiprovider
  silva.app.redirectlink
  silva.export.opendocument
  silva.searchandreplace
  silva.security.addables
  silvatheme.multiflex
  silva.app.document

[zodbupdate]
recipe = zc.recipe.egg
eggs =
    zodbupdate
    ${instance:eggs}
