===========================
List of known bugs - issues
===========================

This is a list of points that need attention before final release.

Important issues
================

Editor
------

- The icon sprite used in the editor skin contains transparent
  icons. They should be replaced with not transparent one (using the
  transparent color is ok, but not semi transparent one). Base icon
  set would be yumyum.

- Update CKEditor, to support iPad (need a new verison of js.ckeditor
  to be made on bitbutcket).

- Code source and image selection and dragging around should be fixed
  in IE, Chrome, Safari. It only works on Firefox. Those elements are
  inline-block. Selection behave like block selection in Firefox, and
  like inline selection in other browsers. This should be somehow
  fixed.

- An option should be added in the service_editor in order to ban the
  use of colors in the text editor (think about the table background,
  foreground and border colors).

- When all the editor issues are resolved, test all code sources (from
  a user perspective).

Silva core
----------

- Catalog indexing should be tested and fixed. Each action requiring a
  reindexing of the object, should reindex all the object, as some
  indexes used other index values (like fulltext). Fulltext should be
  defined as its own interface.

  This can be effeciently fixed, by collecting which content to
  reindex during the action phase of the request, and reindexing them
  at the end of this action (thread local, or request annotation).

- File that are inside Image content should not be indexed (they
  should not trigger any event, maybe adding a suppress_event).

- If you create a Ghost Folder from a Folder, you cannot no longer
  delete anything from the source Folder. You should be able to, and
  that should delete the linked content in the Ghost Folder too.

- Content order is not correct in some container events (rename is
  one). This is due to the fact that is considered as it is removed
  and added back after. During those operation, the order should
  remain the same. This need testing.

- If you upload a new File in an existing one, the content_type,
  content_encoding and such are not properly updated. This need
  testing.

- SQL source is broken in SilvaExternalSources (not addable).

- Update ODT export.


API
---

- silva_walk_tree require issue (is not passed when it recurse, in
  silva.core.services).

- in Silva, versioning.py, get_viewable and similar methods should do
  _getOb(version_id, None), in case of inconsistent document. In case
  of inconsistent document it should issued an error in the logs.

Forms
-----

- update inline validation to work with nested form widget.

- the file upload widget must tested in low latency networks. For the
  moment it does work.

- the image thumbnail displayed in SMI should not have cache headers
  (maybe no cache header if there is a ++preview++ in the image URL,
  and use the preview URL for the image).

- the middleware used by the file upload widget should not intercept
  all file upload (test with the SilvaSoftwareCenter), or add image in
  ZMI code source.


Extensions
----------

- Test and update silva.pas.openid.

- test and update the global search and replace.

Merging
=======

2.1
---

- silva news local datetime option.

- verify logging form changes (redirect to path option).

2.3
---

- file convertion (keep metadata and references, include refactor part
  of the code made in SilvaDocument for the migration).

- file mimetype changes.

- upgrade event.


Tests
=====

These points need extra testing:

- get_introduction document

- formulator adapter / interfacefield / emaillinesfield.

Packaging
=========

- i18nextract should create a launchpad tarball following the
  launchpad structure. It should be able to extract a launchpad
  tarball in a regular gettext translation structure too.

  -> Update translation on launchpad after this.

- make a buildout recipe with the fix_headers script. Add an option to
  detect missing headers, and add them. Verify that the LICENSE.txt is
  in the package, add if missing.

- minimise resources (JS, CSS).  Verify MANIFEST.in (run egg_info,
  check that sources.txt contains all required files).

Low importance issues
=====================

Editor
------

DONE - Code source parameter form is not usuable as the pop-up height passes
  the screen height on small screens. We need to figure out something
  here.

- Code sources options pop up shows checkboxes in the middle, it should
  be more obvious which checkbox belongs to which option.

Listing
-------

- keyboard shortcut change publishable<->asset.

- prevent repeat on keys (ctrl-c).

- if you delete all elements of a container, a line this container is empty
  should be added.

- if you filter out all elements of a container, a line no content
  match your filter criteria should be added.

- improve jstree reloading. at the moment it is impossible to reload
  only an entry of the tree without changing its parent and all
  children.

Other
-----

- Formulator datetime widget using jQuery.

- Check for newlines in HTTP headers in infrae.wsgi.

- When adding an image with a default alignment and the caption option,
  it would be better to put the caption below the image and not next to
  the image.

==============================================================================

Those points need review, testing and description.

UI
==

- settings addable on install

- form change notification

- last author don't change on publication actions

- reference portlet preview / preview should stays in SMI

UI / JS
=======

- on Zope restart invalidation is out of sync

- filter fix while adding

Editor
======

DONE - Not able to add CS's with lots of fields. On a screen height of
  800px you can't see, and use the form actions in the popup for
  adding a CS. There is a scrollbar but it doesn't scroll to the end
  of all fields.

Document
========

- code source error on preview and public rendering

OK - reference edit / multiple reference

Code sources
============

- XML import export

- feedback on install / service

News
====

- Agenda recurrence widget fix
  (Some part still doesn't seems to work, select days and days in a month)

- XML import export

Other
=====

- subscription breaks everything

DONE - silva find doesn't find

Details
=======

- smi layout for download error

- ghost cataloging when haunted change / tests

- code source XML import export / tests

- You can published close, but not approve for future closed (there is
  no version to set publication date). Shoud it be possible ?

- add a whitelist to upgrade


